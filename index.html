<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="google-site-verification" content="ia43lj5ml_kTkuxzkTjz1gTz593nkt3c0NszW1GfymY" />
    <title>달력 PDF 생성기</title>
    <link rel="stylesheet" href="style.css?v=20260105150000">
</head>
<body>
    <div class="container">
        <header>
            <h1>📅 달력 생성기</h1>
        </header>

        <div class="controls">
            <div class="selector-group">
                <select id="yearSelect" class="selector">
                    <!-- JavaScript로 채워질 예정 -->
                </select>
                <select id="monthSelect" class="selector">
                    <option value="1">1월</option>
                    <option value="2">2월</option>
                    <option value="3">3월</option>
                    <option value="4">4월</option>
                    <option value="5">5월</option>
                    <option value="6">6월</option>
                    <option value="7">7월</option>
                    <option value="8">8월</option>
                    <option value="9">9월</option>
                    <option value="10">10월</option>
                    <option value="11">11월</option>
                    <option value="12">12월</option>
                </select>
            </div>

            <div class="nav-buttons">
                <button id="prevMonth" class="nav-btn">◀ 이전</button>
                <button id="nextMonth" class="nav-btn">다음 ▶</button>
            </div>

            <div class="options-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="showHolidays">
                    <span class="checkbox-text">🇰🇷 한국 공휴일 표시</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="showGoogleEvents" disabled>
                    <span class="checkbox-text">📅 구글 캘린더 이벤트 표시</span>
                </label>
            </div>

            <div class="pdf-options">
                <label class="pdf-option-label">
                    <span class="option-text">📄 PDF 한 장당 달력 개수:</span>
                    <select id="monthsPerPage" class="pdf-selector">
                        <option value="1">1개월 (12페이지)</option>
                        <option value="2">2개월 (6페이지)</option>
                        <option value="3" selected>3개월 (4페이지)</option>
                    </select>
                </label>
                <div class="seasonal-food-option-wrapper" id="seasonalFoodOption" style="display: none;">
                    <label class="checkbox-label seasonal-food-option">
                        <input type="checkbox" id="showSeasonalFood">
                        <span class="checkbox-text">🍽️ 제철 음식 정보 포함</span>
                    </label>
                    <span class="seasonal-food-hint">💡 1개월 선택 시 PDF와 웹에 제철 음식 정보가 표시됩니다</span>
                </div>
            </div>

            <div class="dday-section">
                <div class="dday-header">
                    <span class="dday-title">🎯 D-Day 설정</span>
                </div>
                <div id="ddayContainer">
                    <div class="dday-item" data-dday-index="0" style="display: none;">
                        <input type="checkbox" id="showDday0" class="dday-checkbox">
                        <label for="showDday0" class="dday-label">D-Day 1</label>
                        <input type="date" id="ddayDate0" class="dday-date-input">
                        <input type="text" id="ddayName0" class="dday-name-input" placeholder="이벤트 이름">
                        <select id="ddayColor0" class="dday-color-select">
                            <option value="#e74c3c">빨간색</option>
                            <option value="#667eea" selected>파란색</option>
                            <option value="#27ae60">초록색</option>
                            <option value="#f39c12">주황색</option>
                            <option value="#9b59b6">보라색</option>
                            <option value="#1abc9c">청록색</option>
                        </select>
                        <button type="button" class="dday-remove-btn" data-remove-index="0">✕</button>
                    </div>
                    <div class="dday-item" data-dday-index="1" style="display: none;">
                        <input type="checkbox" id="showDday1" class="dday-checkbox">
                        <label for="showDday1" class="dday-label">D-Day 2</label>
                        <input type="date" id="ddayDate1" class="dday-date-input">
                        <input type="text" id="ddayName1" class="dday-name-input" placeholder="이벤트 이름">
                        <select id="ddayColor1" class="dday-color-select">
                            <option value="#e74c3c">빨간색</option>
                            <option value="#667eea" selected>파란색</option>
                            <option value="#27ae60">초록색</option>
                            <option value="#f39c12">주황색</option>
                            <option value="#9b59b6">보라색</option>
                            <option value="#1abc9c">청록색</option>
                        </select>
                        <button type="button" class="dday-remove-btn" data-remove-index="1">✕</button>
                    </div>
                    <div class="dday-item" data-dday-index="2" style="display: none;">
                        <input type="checkbox" id="showDday2" class="dday-checkbox">
                        <label for="showDday2" class="dday-label">D-Day 3</label>
                        <input type="date" id="ddayDate2" class="dday-date-input">
                        <input type="text" id="ddayName2" class="dday-name-input" placeholder="이벤트 이름">
                        <select id="ddayColor2" class="dday-color-select">
                            <option value="#e74c3c">빨간색</option>
                            <option value="#667eea" selected>파란색</option>
                            <option value="#27ae60">초록색</option>
                            <option value="#f39c12">주황색</option>
                            <option value="#9b59b6">보라색</option>
                            <option value="#1abc9c">청록색</option>
                        </select>
                        <button type="button" class="dday-remove-btn" data-remove-index="2">✕</button>
                    </div>
                </div>
                <button type="button" id="addDdayBtn" class="dday-add-btn">+ D-Day 추가</button>
            </div>

            <div class="google-auth-section">
                <div class="verification-notice">
                    <span class="notice-icon">⚠️</span>
                    <span class="notice-text">현재 Google 앱 심사 중입니다. 로그인 시 "고급 → 이동" 을 클릭하세요.</span>
                </div>
                <div class="permission-notice">
                    <span class="notice-icon">🔒</span>
                    <div class="permission-details">
                        <strong>권한 안내</strong>
                        <p>Google 로그인 시 "연락처 보기" 권한이 표시되지만, <strong>실제로 연락처 정보는 수집하지 않습니다</strong>.</p>
                        <p>이 메시지는 캘린더 공유 정보 접근 권한 때문에 표시되는 것이며, 본 앱은 <strong>캘린더와 일정 정보만 읽어옵니다</strong>.</p>
                    </div>
                </div>
                <button id="authorizeButton" class="btn-google" style="display: none;">
                    🔐 구글 캘린더 연동
                </button>
                <button id="signoutButton" class="btn-google-signout" style="display: none;">
                    🚪 로그아웃
                </button>
                <div id="authStatus" class="auth-status"></div>
            </div>

            <div id="calendarSelector" class="calendar-selector" style="display: none;">
                <div class="calendar-selector-header">
                    <span class="calendar-selector-title">📂 표시할 캘린더 선택</span>
                    <button id="toggleCalendarList" class="toggle-btn">▼</button>
                </div>
                <div id="calendarList" class="calendar-list">
                    <!-- JavaScript로 캘린더 목록이 생성될 예정 -->
                </div>
            </div>
        </div>

        <div id="calendar" class="calendar">
            <!-- JavaScript로 달력이 생성될 예정 -->
        </div>

        <div class="actions">
            <button id="downloadPdf" class="btn-primary">📥 PDF 다운로드</button>
        </div>
    </div>

    <!-- PDF 달 선택 모달 -->
    <div id="pdfMonthModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">📅 출력할 달 선택</h2>
                <button id="closeModal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="month-selection-controls">
                    <button id="selectAllMonths" class="btn-select">전체 선택</button>
                    <button id="deselectAllMonths" class="btn-select">전체 해제</button>
                </div>
                <div id="monthGrid" class="month-grid">
                    <!-- JavaScript로 월별 미리보기가 생성됨 -->
                </div>
            </div>
            <div class="modal-footer">
                <span id="selectedMonthsCount" class="selected-count">0개월 선택됨</span>
                <button id="confirmPdfDownload" class="btn-primary" disabled>PDF 생성</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-links">
            <a href="https://github.com/webnautes/calendar-pdf-generator" target="_blank">GitHub</a>
            <span class="footer-separator">|</span>
            <a href="privacy-policy.html" target="_blank">개인정보처리방침</a>
            <span class="footer-separator">|</span>
            <a href="terms-of-service.html" target="_blank">이용약관</a>
        </div>
        <div class="visitor-counter">
            <span class="counter-icon">📥</span>
            <span class="counter-text">전체 PDF 생성:</span>
            <span id="pdfDownloadCount" class="counter-number">0</span>
            <span class="counter-unit">회</span>
        </div>
        <div class="last-pdf-time">
            <span class="time-icon">🕒</span>
            <span class="time-text">마지막 생성:</span>
            <span id="lastPdfTime" class="time-value">-</span>
        </div>
        <p class="footer-copyright">© 2025-2026 webnautes | MIT License</p>
    </footer>

    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!-- Google API Client Library -->
    <script src="https://apis.google.com/js/api.js"></script>

    <!-- PDF 생성 라이브러리 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js?v=20260105150000"></script>
</body>
</html>
